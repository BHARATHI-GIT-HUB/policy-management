@model RepositryAssignement.Models.PolicyEnrollment;


@{
    ViewData["Title"] = "Submit";
    Layout = "~/Views/Shared/_CustomeLayout.cshtml";
}

<html>
<head>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
    <link href="https://fonts.googleapis.com/css?family=Arapey:400,400i,600|Open+Sans:300" rel="stylesheet">

</head>
<style>
    .custome-text {
        margin: 0px;
        font-size: 14px;
        color: rgb(32, 32, 32);
        line-height: 18px;
        font-weight: 500;
    }

    .transparence {
        background-color: rgba(0, 0, 0, 0.5); /* Use rgba for transparency */
        color: white; /* White text color */
        transition: background-color 0.3s; /* Smooth transition for background color change */
    }

    a {
        color: inherit; /* Use the color inherited from the parent */
        text-decoration: none; /* Remove default underline */
    }

    .custome-card:hover {
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
    }
</style>
<body class="position-relative">



    <div class="d-flex flex-column gap-4  ">
        <div class="d-flex flex-column gap-4">
            <div class="d-flex gap-2" onclick="goBack()">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
                </svg>
                <p class="mb-1 text-center h6 " style="cursor:pointer;">Choose Premium</p>
            </div>
            <div class="border-0 rounded-1 p-4 d-flex flex-column  shadow-sm custome-card" style="cursor:pointer;border-radius:5px;background-color:white">
            <h6 style="color:#2a3981; font-size:20px">@ViewBag.PlanName</h6>
                <p class="custome-text">@ViewBag.PlanDescription</p>
                <div class="d-flex flex-column">
             <form   method="post">
                    
                <div class="my-2">
                            <p style="font-weight:600; font-size:18px; margin:10px 0 3px 0">Time Period</p>

                            <div class="mr-5 d-flex gap-5 align-items-center">
                                <div>
                                    <input class="form-check-input" type="radio" name="TimePeriod" value="1" id="year1" onclick="calculatePremium(1,document.querySelector('input[name=Frequency]:checked').value)" checked="checked">
                                    <label class="form-check-label" asp-for="TimePeriod" for=`year{1}`>1 Year</label>
                                </div>
                            @for(int year = 2; year <=ViewBag.TimePeriod; year++)
                            {  
                                <div>
                                        <input asp-for="TimePeriod" class="form-check-input" type="radio" name="TimePeriod" value=@year id=`year{@year}` onclick="calculatePremium(@year,document.querySelector('input[name=Frequency]:checked').value)">
                                        <label class="form-check-label" for=`year{@year}`>@year Year</label>
                                </div>
         
                            }
                 </div>
                            <p style="font-weight:600; font-size:18px; margin:10px 0 3px 0">Frequency</p>

                 <div class="d-flex gap-5 align-items-center mr-5">
                                <div>
                                    <input class="form-check-input" type="radio" name="Frequency" value="1" id="1" onclick="calculatePremium(document.querySelector('input[name=TimePeriod]:checked').value,1)" checked="checked">
                                    <label class="form-check-label" for="1"> Yearly</label>
                                </div>
                                <div>
                                    <input class="form-check-input" type="radio" name="Frequency" value="2" id="2" onclick="calculatePremium(document.querySelector('input[name=TimePeriod]:checked').value,2)">
                                    <label class="form-check-label" for="2"> Half Yearly</label>
                                </div>
                                <div>
                                    <input class="form-check-input" type="radio" name="Frequency" value="4" id="3" onclick="calculatePremium(document.querySelector('input[name=TimePeriod]:checked').value,4)">
                                    <label class="form-check-label" for="3"> Quartly</label>
                                </div>
                                <div>
                                    <input class="form-check-input" type="radio" name="Frequency" value="12" id="4" onclick="calculatePremium(document.querySelector('input[name=TimePeriod]:checked').value,12)">
                                    <label class="form-check-label" for="4"> Monthly</label>
                                </div>
                 </div>
                        </div>
                         <input asp-for="Premium" class="form-control" name="Premium" id="premiumInput" style="display: none;" />
                        <input asp-for="CoverageAmount" class="form-control" name="CoverageAmount" id="coverageAmount" style="display: none;" />
                        <input asp-for="PlanId" class="form-control" name="PlanId" id="PlanId" value="@ViewBag.PlanId" style="display: none;" />

                        <nav class="navbar fixed-bottom navbar-expand-lg bg-white navbar-dark shadow-lg d-flex justify-content-center align-items-center py-3 transparent">
                            <button type="submit" class="btn btn-primary btn-lg px-5 ">Buy</button>
                        </nav>
                 </form>
            </div>
            <div class="w-100 d-flex justify-content-between align-items-center">
                <p style="font-weight:600; font-size:20px;">Total Premium</p>
                <p  id="totalPremium" style="font-weight:600; font-size:20px;">
                    ₹
                    @Html.DisplayFor(model => model.Premium)

                </p>

            </div>
        </div>

      
    </div>
    </div>



     
    <script>
            const premiumDisplay = document.getElementById("totalPremium");
            const input = document.getElementById("premiumInput");
            const coverage = document.getElementById("coverageAmount");

            function goBack() {
                window.history.back();
            }



        function calculatePremium(TimePeriod, Frequency) {
            var coverageAmount = @Model.CoverageAmount;
            var premium = coverageAmount / ( TimePeriod * Frequency);
            console.log("Premium: " + premium);

        coverage.value = @Model.CoverageAmount;
            premiumDisplay.textContent = "₹ " + Math.ceil(premium.toFixed(2));
        
            input.value = Math.ceil(premium.toFixed(2));
        }

        calculatePremium(1, 1);
    </script>
</body>
</html>